<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="An impressive and flawless site template that includes various UI elements and countless features, attractive ready-made blocks and rich pages, basically everything you need to create a unique and professional website."
    />
    <meta
      name="keywords"
      content="bootstrap 5, business, corporate, creative, gulp, marketing, minimal, modern, multipurpose, one page, responsive, saas, sass, seo, startup, html5 template, site template"
    />
    <meta name="author" content="elemis" />
    <title>Desa Bumi Sriwijaya</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
    />
    <link rel="shortcut icon" href="./assets/logo/logo.png" />
    <link rel="stylesheet" href="./assets/css/plugins.css" />
    <link rel="stylesheet" href="./assets/css/style.css" />
    <style>
      .preloader {
        align-items: center;
        background: linear-gradient(
          rgba(53, 147, 255, 1),
          rgba(218, 33, 255, 1)
        );
        display: flex;
        height: 100vh;
        justify-content: center;
        left: 0;
        position: fixed;
        top: 0;
        transition: opacity 0.2s linear;
        width: 100%;
        z-index: 9999;
        opacity: 1;
        transform: opacity 1s linear;
      }
    </style>
  </head>

  <body>
    <div class="content-wrapper" id="app">
      <div class="preloader" v-if="preloader">
        <img src="./assets/logo/loader-logo.gif" alt="spinner" class="h-10" />
      </div>

      <header class="wrapper bg-soft-primary">
        <nav
          class="navbar navbar-expand-lg center-logo bg-image position-absolute navbar-dark"
          data-image-src="./assets/img/photos/bg2.jpg"
        >
          <div
            class="container justify-content-between align-items-center mx-1"
            style="max-width: 100%"
          >
            <div
              class="d-flex flex-row w-100 justify-content-between align-items-center d-lg-none"
            >
              <div class="navbar-brand py-2">
                <a href="./index.html">
                  <img
                    class="logo-dark"
                    src="./assets/logo/logofont.png"
                    srcset="./assets/logo/logofont.png 8x"
                    alt=""
                  />
                  <img
                    class="logo-light"
                    src="./assets/logo/logofont.png"
                    srcset="./assets/logo/logofont.png 8x"
                    alt=""
                  />
                </a>
              </div>

              <div class="navbar-other ms-auto">
                <ul class="navbar-nav flex-row align-items-center">
                  <li class="nav-item">
                    <nav
                      class="nav social social-white justify-content-end text-end"
                    >
                      <a
                        href="https://www.facebook.com/people/Bps-Provinsi-Sumatera-Selatan/100015484759318/"
                        target="_blank"
                        ><i class="uil uil-facebook-f"></i
                      ></a>
                      <a
                        href="https://www.instagram.com/bpssumsel/?hl=en"
                        target="_blank"
                        ><i class="uil uil-instagram"></i
                      ></a>
                      <a
                        href="https://www.youtube.com/channel/UC-9WQN-5cNTVTGDF8Rkiu6A"
                        target="_blank"
                        ><i class="uil uil-youtube"></i
                      ></a>
                    </nav>
                  </li>
                  <li class="nav-item d-lg-none">
                    <button class="hamburger offcanvas-nav-btn">
                      <span></span>
                    </button>
                  </li>
                </ul>
              </div>
            </div>

            <div
              class="navbar-collapse-wrapper d-flex flex-row align-items-center w-100"
            >
              <div
                class="navbar-collapse offcanvas offcanvas-nav offcanvas-start"
              >
                <div class="navbar-brand px-2">
                  <a href="./index.html">
                    <img
                      src="./assets/logo/logofont.png"
                      srcset="./assets/logo/logofont.png 8x"
                      alt=""
                    />
                  </a>
                </div>

                <div class="w-100 order-1 order-lg-0 d-lg-flex offcanvas-body">
                  <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle" href="./home.html"
                        >Profile</a
                      >
                      <ul class="dropdown-menu">
                        <li class="nav-item">
                          <a class="dropdown-item" href="./monograph.html"
                            >Monograph</a
                          >
                        </li>
                        <li class="nav-item">
                          <a class="dropdown-item" href="#">Organisasi</a>
                        </li>
                      </ul>
                    </li>
                    <li class="nav-item dropdown">
                      <a
                        class="nav-link dropdown-toggle"
                        href="#"
                        data-bs-toggle="dropdown"
                        >Kependudukan</a
                      >
                      <ul class="dropdown-menu">
                        <li class="nav-item">
                          <a class="dropdown-item" href="./kemiskinan.html"
                            >Kemiskinan</a
                          >
                        </li>
                        <li class="nav-item">
                          <a class="dropdown-item" href="./stunting.html"
                            >Stunting</a
                          >
                        </li>
                        <li class="nav-item">
                          <a class="dropdown-item" href="./penduduk.html"
                            >Penduduk</a
                          >
                        </li>
                      </ul>
                    </li>
                    <li class="nav-item dropdown">
                      <a
                        class="nav-link dropdown-toggle"
                        href="#"
                        data-bs-toggle="dropdown"
                        >Ekonomi</a
                      >
                      <ul class="dropdown-menu">
                        <li class="nav-item">
                          <a class="dropdown-item" href="./umkm.html">UMKM</a>
                        </li>
                      </ul>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="#" target="_blank">Tematik</a>
                    </li>
                  </ul>
                </div>
                <div
                  class="w-100 order-3 order-lg-2 d-lg-flex offcanvas-body text-end"
                >
                  <ul class="navbar-nav ms-auto me-0">
                    <li class="text-end d-none d-lg-block navbar-other">
                      <nav class="nav social social-white mt-2">
                        <a
                          href="https://www.facebook.com/people/Bps-Provinsi-Sumatera-Selatan/100015484759318/"
                          target="_blank"
                          ><i class="uil uil-facebook-f"></i
                        ></a>
                        <a
                          href="https://www.instagram.com/bpssumsel/?hl=en"
                          target="_blank"
                          ><i class="uil uil-instagram"></i
                        ></a>
                        <a
                          href="https://www.youtube.com/channel/UC-9WQN-5cNTVTGDF8Rkiu6A"
                          target="_blank"
                          ><i class="uil uil-youtube"></i
                        ></a>
                      </nav>
                    </li>
                  </ul>
                </div>
                <div class="offcanvas-body order-4 mt-auto">
                  <div class="d-lg-none mt-auto pt-6 pb-6 order-4">
                    <a href="mailto:first.last@email.com" class="link-inverse"
                      >info@email.com</a
                    >
                    <br />
                    00 (123) 456 78 90 <br />
                    <nav class="nav social social-white mt-4">
                      <a
                        href="https://www.facebook.com/people/Bps-Provinsi-Sumatera-Selatan/100015484759318/"
                        target="_blank"
                        ><i class="uil uil-facebook-f"></i
                      ></a>
                      <a
                        href="https://www.instagram.com/bpssumsel/?hl=en"
                        target="_blank"
                        ><i class="uil uil-instagram"></i
                      ></a>
                      <a
                        href="https://www.youtube.com/channel/UC-9WQN-5cNTVTGDF8Rkiu6A"
                        target="_blank"
                        ><i class="uil uil-youtube"></i
                      ></a>
                    </nav>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </nav>
      </header>

      <section
        class="wrapper image-wrapper bg-image bg-overlay bg-overlay-900 bg-overlay-900"
        data-image-src="./assets/img/desa/desa_1.jpg"
      >
        <div class="container pt-6 pt-md-15 pb-8">
          <div
            class="row gx-lg-8 gy-8 mt-5 mt-md-12 mt-lg-0 mb-8 align-items-center"
          >
            <div class="col-lg-6 order-lg-2">
              <div
                class="row gx-md-5 gy-5"
                data-cues="fadeIn"
                data-group="images"
              >
                <div class="col-md-6 text-center">
                  <figure class="rounded mx-4">
                    <img
                      src="./assets/prov-logo/prov_logo.png"
                      srcset="./assets/prov-logo/prov_logo.png 2x"
                      alt=""
                      style="
                        max-height: 300px;
                        max-width: 200px;
                        height: 100%;
                        width: 100%;
                      "
                    />
                  </figure>
                </div>
                <div class="col-md-6 text-center">
                  <figure class="rounded mx-4">
                    <img
                      src="./assets/kabs-logo/logo1601.png"
                      srcset="./assets/kabs-logo/logo1601.png 2x"
                      alt=""
                      style="
                        max-height: 300px;
                        max-width: 200px;
                        height: 100%;
                        width: 100%;
                      "
                    />
                  </figure>
                </div>
              </div>
            </div>
            <div class="col-lg-6 text-white">
              <div
                data-cues="slideInDown"
                data-group="page-title"
                data-delay="600"
              >
                <h1 class="display-1 text-white mb-4">
                  {{ wilayah.tingkat }} <br />
                  <span
                    class="typer text-sky"
                    data-delay="100"
                    :data-words="wilayah.nama"
                  >
                  </span>
                  <span class="cursor text-sky" data-owner="typer"></span>
                </h1>
                <p class="lead fs-24 lh-sm text-white mb-7">{{ deskripsi }}</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="wrapper bg-light" v-if="show">
        <div class="container py-6 py-md-8">
          <div class="row gx-lg-8 gx-xl-12 gy-10 gy-lg-0 mb-4">
            <div class="col-lg-4">
              <h3 class="display-4 mb-3 pe-xl-10">Jumlah Keluarga</h3>
              <h1 class="display-1 mb-0 pe-xxl-10">{{ jumlahKeluarga }}</h1>
            </div>
            <div class="col-lg-8 mt-lg-2">
              <div
                class="row align-items-center counter-wrapper gy-6 text-center"
              >
                <div class="col-md-4">
                  <img
                    src="./assets/img/icons/lineal/group.svg"
                    class="icon-svg icon-svg-md text-primary mb-3"
                    alt=""
                  />
                  <h3 class="counter">
                    {{ statusKesejahteraanKeluarga ?
                    statusKesejahteraanKeluarga.sangat_miskin + " (" +
                    statusKesejahteraanKeluargaPersentase.sangat_miskin + "%) "
                    : "" }}
                  </h3>
                  <p>Sangat Miskin</p>
                </div>
                <div class="col-md-4">
                  <img
                    src="./assets/img/icons/lineal/savings.svg"
                    class="icon-svg icon-svg-md text-primary mb-3"
                    alt=""
                  />
                  <h3 class="counter">
                    {{ statusKesejahteraanKeluarga ?
                    statusKesejahteraanKeluarga.miskin + " (" +
                    statusKesejahteraanKeluargaPersentase.miskin + "%) " : "" }}
                  </h3>
                  <p>Miskin</p>
                </div>
                <div class="col-md-4">
                  <img
                    src="./assets/img/icons/lineal/tie.svg"
                    class="icon-svg icon-svg-md text-primary mb-3"
                    alt=""
                  />
                  <h3 class="counter">
                    {{ statusKesejahteraanKeluarga ?
                    statusKesejahteraanKeluarga.tidak_miskin + " (" +
                    statusKesejahteraanKeluargaPersentase.tidak_miskin + "%) " :
                    "" }}
                  </h3>
                  <p>Tidak Miskin</p>
                </div>
              </div>
            </div>
          </div>
          <hr class="my-4" />
          <h3 class="display-4 mb-3 text-center">Keluarga</h3>
          <p class="lead fs-lg mb-10 text-center">
            Berdasarkan Tingkat Kesejahteraan
          </p>
          <div class="position-relative mb-4 mb-md-6">
            <div
              class="shape rounded-circle bg-soft-primary rellax w-16 h-16"
              data-rellax-speed="1"
              style="top: -0.5rem; right: -2.5rem; z-index: 0"
            ></div>
            <div
              class="shape bg-dot primary rellax w-16 h-17"
              data-rellax-speed="1"
              style="top: -0.5rem; left: -2.5rem; z-index: 0"
            ></div>
            <div class="row gx-md-5 gy-5">
              <div class="col-lg-6 d-flex align-items-stretch">
                <div class="card w-100">
                  <div
                    class="card-body d-flex justify-content-center align-items-center"
                  >
                    <canvas ref="persentaseKemiskinan"></canvas>
                  </div>
                </div>
              </div>
              <div class="col-lg-6 d-flex align-items-stretch">
                <div class="card w-100">
                  <div class="card-body">
                    <div ref="petaKemiskinan" style="height: 600px"></div>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="card">
                  <div class="card-body">
                    <div class="row">
                      <div class="col-xl-11 col-lg-10 col-md-9 col-sm-8 mb-2">
                        <div class="form-floating">
                          <input
                            id="pencarian"
                            type="text"
                            class="form-control"
                            placeholder="Pencarian"
                            v-model="pencarian"
                            @keyup.enter="getKeluarga()"
                          />
                          <label for="pencarian">Pencarian</label>
                        </div>
                      </div>
                      <div class="col-xl-1 col-lg-2 col-md-3 col-sm-4 mb-2">
                        <a
                          class="btn btn-primary rounded-0"
                          @click="getKeluarga()"
                          >Cari!</a
                        >
                      </div>
                      <div class="col-12 mb-2">
                        <div class="table-responsive" ref="tabelKemiskinan">
                          <table class="table table-hover">
                            <thead>
                              <tr>
                                <th>No KK</th>
                                <th>Nama Kepala Keluarga</th>
                                <th>Jumlah Anggota Keluarga</th>
                                <th>Satuan Lingkungan Setempat</th>
                                <th>Alamat</th>
                                <th>Status Kesejahteraan</th>
                                <th>Lokasi</th>
                                <th>Bantuan</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr v-for="k in keluarga.data">
                                <td>{{ k.no_kk }}</td>
                                <td>{{ k.nama_kepala }}</td>
                                <td>{{ k.jumlah_art }}</td>
                                <td>{{ k.nama_sls }}</td>
                                <td>{{ k.alamat }}</td>
                                <td>
                                  {{
                                  statusKesejahteraanLabel[k.status_kesejahteraan]
                                  }}
                                </td>
                                <td>
                                  <a
                                    class="btn btn-outline-primary btn-sm rounded-0"
                                    @click="getLokasi(k.latitude, k.longitude, k.nama_kepala)"
                                    >Lokasi</a
                                  >
                                </td>
                                <td>
                                  <a
                                    class="btn btn-outline-primary btn-sm rounded-0"
                                    @click="getBantuan(k.bantuan)"
                                    >Bantuan</a
                                  >
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                      <div class="col-12 d-flex justify-content-center">
                        <div class="table-responsive">
                          <nav aria-label="pagination keluarga">
                            <ul class="pagination">
                              <li
                                class="page-item"
                                :class="{ disabled: l.active || !l.url }"
                                v-for="l in keluarga.links"
                              >
                                <a class="page-link" @click="getKeluarga(l.url)"
                                  ><span
                                    v-html="l.label.replace('Previous', '').replace('Next', '')"
                                  ></span
                                ></a>
                              </li>
                            </ul>
                          </nav>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12" v-if="bantuan.length != 0">
                <div class="card">
                  <div class="card-body">
                    <div class="row">
                      <div class="col-12">
                        <div class="table-responsive" ref="tabelBantuan">
                          <table class="table table-hover">
                            <thead>
                              <tr>
                                <th>No KK</th>
                                <th>NIK Penerima Bantuan</th>
                                <th>Nama Kepala Keluarga</th>
                                <th>Nama Bantuan</th>
                                <th>Deskripsi Bantuan</th>
                                <th>Bentuk Bantuan</th>
                                <th>Instansi Pemberi Bantuan</th>
                                <th>Waktu Bantuan</th>
                                <th>Jumlah Bantuan</th>
                                <th>Satuan Bantuan</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr v-for="b in bantuan">
                                <td>{{ b.no_kk }}</td>
                                <td>{{ b.nik }}</td>
                                <td>{{ b.nama_kepala }}</td>
                                <td>
                                  {{ nameKategoriBantuan(b.bantuan_id,
                                  "nama_bantuan") }}
                                </td>
                                <td>
                                  {{ nameKategoriBantuan(b.bantuan_id,
                                  "deskripsi_bantuan") }}
                                </td>
                                <td>
                                  {{ nameKategoriBantuan(b.bantuan_id,
                                  "bentuk_bantuan") }}
                                </td>
                                <td>
                                  {{ nameKategoriBantuan(b.bantuan_id,
                                  "instansi_pemberi") }}
                                </td>
                                <td>{{ b.waktu_bantuan }}</td>
                                <td>{{ b.jumlah_bantuan }}</td>
                                <td>{{ b.satuan_bantuan }}</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section class="wrapper bg-light" v-else>
        <div class="container py-6 py-md-8">
          <h3>Belum Ada Data</h3>
        </div>
      </section>

      <footer
        class="bg-dark text-inverse"
        data-image-src="./assets/img/photos/bg2.jpg"
      >
        <div
          class="container mx-10 pb-7 pb-md-7 pt-3 mt-3"
          style="max-width: 92%"
        >
          <div class="row gy-6 gy-lg-0">
            <div class="col-md-4 col-lg-4">
              <div class="widget">
                <img
                  class="mb-4"
                  src="./assets/logo/logo.png"
                  srcset="./assets/logo/logo.png 8x"
                  alt=""
                />
                <p class="mb-4">
                  Â© 2023 Developer 1600<br class="d-none d-lg-block" />Hak Cipta
                </p>
                <nav class="nav social social-white">
                  <a
                    href="https://www.facebook.com/people/Bps-Provinsi-Sumatera-Selatan/100015484759318/"
                    target="_blank"
                    ><i class="uil uil-facebook-f"></i
                  ></a>
                  <a
                    href="https://www.instagram.com/bpssumsel/?hl=en"
                    target="_blank"
                    ><i class="uil uil-instagram"></i
                  ></a>
                  <a
                    href="https://www.youtube.com/channel/UC-9WQN-5cNTVTGDF8Rkiu6A"
                    target="_blank"
                    ><i class="uil uil-youtube"></i
                  ></a>
                </nav>
              </div>
            </div>

            <div class="col-md-4 col-lg-4">
              <div class="widget">
                <h4 class="widget-title text-white mb-3">Hubungi Kami</h4>
                <address class="pe-xl-15 pe-xxl-17">
                  Jl. Kapten Anwar Sastro No 1694 Palembang, Sumatera Selatan
                  30129
                </address>
                <a href="mailto:#">bps1600@bps.go.id</a><br />
                Telp (0711) 351665, 318456
              </div>
            </div>

            <div class="col-md-4 col-lg-4">
              <div class="widget">
                <h4 class="widget-title text-white mb-3">Selengkapnya</h4>
                <ul class="list-unstyled mb-0">
                  <li>
                    <a href="https://sumsel.bps.go.id" target="_blank"
                      >Official BPS SUMSEL</a
                    >
                  </li>
                  <li>
                    <a href="https://pstdigital.bpssumsel.com" target="_blank"
                      >Konsultasi Online</a
                    >
                  </li>
                  <li>
                    <a
                      href="https://sdgsforsumsel.bpssumsel.com"
                      target="_blank"
                      >SDG's For Sumsel</a
                    >
                  </li>
                  <li>
                    <a href="https://zi.bpssumsel.com" target="_blank"
                      >Zona Integritas</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </footer>

      <div class="progress-wrap">
        <svg
          class="progress-circle svg-content"
          width="100%"
          height="100%"
          viewBox="-1 -1 102 102"
        >
          <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
        </svg>
      </div>
    </div>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/chart.js/dist/chart.umd.js"></script>
    <script src="https://unpkg.com/sweetalert2/dist/sweetalert2.all.min.js"></script>
    <script>
      const { createApp } = Vue;

      createApp({
        data() {
          return {
            url: "https://descan.bpssumsel.com/api/",
            kode: "1606021007",
            wilayah: {},
            deskripsi: "",
            map: null,
            pointMap: {
              marker: null,
              tooltip: null,
            },
            keluarga: {},
            statusKesejahteraanKeluarga: {},
            statusKesejahteraanKeluargaPersentase: {},
            statusKesejahteraanSelected: "",
            statusKesejahteraanLabel: {
              1: "Sangat Miskin",
              2: "Miskin",
              3: "Tidak Miskin",
            },
            jumlahKeluarga: 0,
            kategoriBantuan: {},
            bantuan: [],
            pencarian: "",
            show: false,
            preloader: true,
          };
        },
        methods: {
          async getWilayah() {
            await axios
              .get(this.url + "wilayah/" + this.kode + "/show")
              .then((d) => {
                this.wilayah = d.data.datas.result;

                const kode =
                  "16" +
                  this.wilayah.kode_kab.replace("00", "") +
                  this.wilayah.kode_kec.replace("000", "") +
                  this.wilayah.kode_desa.replace("000", "");

                switch (kode.length) {
                  case 2:
                    this.wilayah.tingkat = "Provinsi";
                    break;
                  case 4:
                    this.wilayah.tingkat = "Kabupaten/Kota";
                    break;
                  case 7:
                    this.wilayah.tingkat = "Kecamatan";
                    break;
                  case 10:
                    this.wilayah.tingkat = "Desa/Kelurahan";
                    break;
                }
              });
          },
          async getDeskripsi() {
            await axios
              .get(this.url + "wilayah/" + this.kode + "/deskripsi")
              .then((d) => {
                this.deskripsi = d.data.datas.deskripsi;
              });
          },
          createMap() {
            if (this.map) this.map.remove();

            this.map = L.map(this.$refs["petaKemiskinan"], {
              attributionControl: false,
            }).setView([-2.990934, 104.756554], 7);

            L.tileLayer("https://{s}.google.com/vt/lyrs=y&x={x}&y={y}&z={z}", {
              subdomains: ["mt0", "mt1", "mt2", "mt3"],
            }).addTo(this.map);
          },
          createChart() {
            const chart = new Chart(this.$refs["persentaseKemiskinan"], {
              type: "pie",
              data: {
                labels: Object.values(this.statusKesejahteraanLabel),
                datasets: [
                  {
                    data: Object.values(this.statusKesejahteraanKeluarga),
                  },
                ],
              },
              options: {
                offset: 20,
                onClick: (e) => {
                  const points = chart.getElementsAtEventForMode(
                    e,
                    "point",
                    { intersect: true },
                    true
                  );

                  if (points.length) {
                    for (k in this.statusKesejahteraanLabel)
                      if (
                        this.statusKesejahteraanLabel[k] ==
                        chart.data.labels[points[0].index]
                      )
                        this.statusKesejahteraanSelected = k;

                    this.getKeluarga();

                    this.$refs["tabelKemiskinan"].scrollIntoView({
                      behavior: "smooth",
                      block: "start",
                      inline: "start",
                    });
                  }
                },
                plugins: {
                  tooltip: {
                    enabled: true,
                    callbacks: {
                      label: (context) => {
                        var index = context.dataset.data.indexOf(context.raw);

                        return (
                          Object.values(this.statusKesejahteraanKeluarga)[
                            index
                          ] +
                          " (" +
                          Object.values(
                            this.statusKesejahteraanKeluargaPersentase
                          )[index] +
                          "%)"
                        );
                      },
                    },
                  },
                },
              },
            });
          },
          async getStatusKesejahteraanKeluarga() {
            await axios
              .get(
                this.url +
                  "keluarga_miskin/" +
                  this.kode +
                  "/sum_status_kesejahteraan"
              )
              .then((d) => {
                this.statusKesejahteraanKeluarga = d.data.datas[0];

                for (k in this.statusKesejahteraanKeluarga)
                  this.jumlahKeluarga += Number(
                    this.statusKesejahteraanKeluarga[k]
                  );

                for (k in this.statusKesejahteraanKeluarga)
                  this.statusKesejahteraanKeluargaPersentase[k] =
                    Math.round(
                      (Number(this.statusKesejahteraanKeluarga[k]) /
                        Number(this.jumlahKeluarga)) *
                        100 *
                        100
                    ) / 100;

                setTimeout(() => this.createMap(), 100);
              });
          },
          async getKeluarga(suffix) {
            var url = "";

            if (suffix) url = this.url + suffix;
            else
              url =
                this.url +
                "keluarga_miskin/" +
                this.kode +
                "/list?status_kesejahteraan=" +
                this.statusKesejahteraanSelected +
                "&keyword=" +
                this.pencarian;

            await axios.get(url).then((d) => {
              this.keluarga = d.data.datas;

              if (this.keluarga.data.length != 0) {
                this.show = true;

                setTimeout(() => this.createMap(), 100);
              }
            });
          },
          getLokasi(lat, lng, nama) {
            if (this.pointMap.marker)
              this.map.removeLayer(this.pointMap.marker);

            if (this.pointMap.tooltip)
              this.map.removeLayer(this.pointMap.tooltip);

            if (lat && lng) {
              this.pointMap.marker = L.marker([lat, lng]).addTo(this.map);
              this.pointMap.tooltip = L.tooltip([lat, lng], {
                content: nama,
                permanent: true,
              }).addTo(this.map);

              this.map.setView([lat, lng], 20);

              this.$refs["petaKemiskinan"].scrollIntoView({
                behavior: "smooth",
                block: "start",
                inline: "start",
              });
            } else {
              this.map.setView([-2.990934, 104.756554], 7);

              Swal.fire({
                text: "Tidak ada lokasi",
                toast: true,
                showConfirmButton: false,
                position: "center",
                timer: 1000,
                timerProgressBar: true,
              });
            }
          },
          async getKategoriBantuan() {
            await axios.get(this.url + "master_bantuan").then((d) => {
              this.kategoriBantuan = d.data.datas;
            });
          },
          nameKategoriBantuan(id, tag) {
            const bantuan = this.kategoriBantuan.find((b) => b.id == id);
            if (bantuan) return bantuan[tag];
            else return "";
          },
          getBantuan(bantuan) {
            this.bantuan = bantuan;

            if (this.bantuan.length != 0) {
              setTimeout(
                () =>
                  this.$refs["tabelBantuan"].scrollIntoView({
                    behavior: "smooth",
                    block: "start",
                    inline: "start",
                  }),
                100
              );
            } else
              Swal.fire({
                text: "Tidak ada bantuan",
                toast: true,
                showConfirmButton: false,
                position: "center",
                timer: 1000,
                timerProgressBar: true,
              });
          },
          loadJS() {
            const pluginsjs = document.createElement("script");
            pluginsjs.setAttribute("src", "./assets/js/plugins.js");
            document.head.appendChild(pluginsjs);

            const themejs = document.createElement("script");
            themejs.setAttribute("src", "./assets/js/theme.js");
            document.head.appendChild(themejs);

            setTimeout(() => theme.init(), 100);
          },
        },
        mounted() {
          this.getWilayah()
            .then(() => this.getDeskripsi())
            .then(() => setTimeout(() => this.loadJS(), 100))
            .then(() => (this.preloader = false));
          this.getStatusKesejahteraanKeluarga().then(() =>
            setTimeout(() => this.createChart(), 100)
          );
          this.getKeluarga();
          this.getKategoriBantuan();
        },
      }).mount("#app");
    </script>
  </body>
</html>
